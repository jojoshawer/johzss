<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charity</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Custom CSS for Donation Posts -->
    <style>
        .post {
            border: 1px solid #ccc;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 5px;
        }

        .donation-details {
            margin-bottom: 10px;
        }

        .donation-details p {
            margin-bottom: 5px;
        }

        .btn-pick-date,
        .btn-delete,
        .btn-acknowledge {
            margin-right: 5px;
        }

        .pickup-date {
            margin-bottom: 5px;
        }

        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            z-index: 9999;
            width: 300px; /* Adjust width as needed */
        }

        .popup-header {
            padding-bottom: 10px;
            border-bottom: 1px solid #ccc;
            margin-bottom: 10px;
        }

        .popup-header h4 {
            margin: 0;
        }

        .popup-body {
            text-align: center;
        }
    </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="my-nav">
      <div class="container">
        <div class="row">
          <div class="nav-items">
            <div class="menu-toggle"></div>
            <div class="logo">
              <img src="assets/images/logo.png">
            </div>
            <div class="menu-items">
              <div class="menu">
                <ul>
                  <li><a href="organization.html">organization</a></li>
                  <li><a href="donor.html">donor</a></li>
                  <li><a href="admin.html">admin</a></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Back Button -->
          <div class="col-2 text-right">
            <a href="organization2.html" class="btn btn-secondary">Back</a>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Section -->
  <section class="bg-02-a">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="_head_01">
            <h2>Organization</h2>
            <p>Home<i class="fas fa-angle-right"></i><span><a href="organization.html">Organization Registration</a></span><i class="fas fa-angle-right"></i><span><a href="organization1.html">Organization Page</a><i class="fas fa-angle-right"></i><span><a href="organization2.html">Donation Request</a></span></span></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Donation Posts -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="post">
          <div class="donation-details">
            <p><span>Item Category:</span> School Supplies</p>
            <p><span>Type:</span> Notebook</p>
            <p><span>Additional Fields:</span> Wide Ruled</p>
            <p><span>Quantity:</span> 20</p>
            <button class="btn btn-primary btn-pick-date" onclick="openPopup(this)">Pick Date</button>
            <button class="btn btn-danger btn-delete" onclick="deleteDonation(this)">Delete</button>
            <button class="btn btn-success btn-acknowledge" onclick="openAcknowledgementPopup()">Acknowledge Donor</button>
          </div>
        </div>

        <!-- Add more donation posts here -->

        <div class="post">
          <div class="donation-details">
            <p><span>Item Category:</span> Toys</p>
            <p><span>Age:</span> 5-8 years</p>
            <p><span>Gender:</span> Any</p>
            <p><span>Category:</span> Puzzle</p>
            <p><span>Quantity:</span> 10</p>
            <button class="btn btn-primary btn-pick-date" onclick="openPopup(this)">Pick Date</button>
            <button class="btn btn-danger btn-delete" onclick="deleteDonation(this)">Delete</button>
            <button class="btn btn-success btn-acknowledge" onclick="openAcknowledgementPopup()">Acknowledge Donor</button>
          </div>
        </div>

        <!-- Add more donation posts here -->

      </div>
    </div>
  </div>

  <!-- Popup for selecting pickup date -->
  <div class="popup" id="popup">
    <div class="popup-header">
      <h4>Pick Convenient Pick Up Time</h4>
    </div>
    <div class="popup-body">
      <input type="date" id="pickup-date" class="pickup-date">
      <button onclick="closePopup()">Done</button> <!-- Updated button onclick -->
    </div>
  </div>

  <!-- Popup for acknowledging donors -->
  <div class="popup" id="acknowledgement-popup">
    <div class="popup-header">
      <h4>Acknowledge Donor Contributions</h4>
    </div>
    <div class="popup-body">
      <textarea id="acknowledgement-message" rows="4" placeholder="Write a heartfelt message to the donor..."></textarea>
      <button onclick="sendAcknowledgement()">Send</button>
    </div>
  </div>

  <script>
    var currentButton = null;

    function openPopup(button) {
  currentButton = button;
  document.getElementById("popup").style.display = "block";
}

function closePopup() {
  var pickupDate = document.getElementById("pickup-date").value;
  var pickupDateNode = document.createElement("p");
  pickupDateNode.textContent = "Pick Up Date: " + pickupDate;
  currentButton.parentNode.insertBefore(pickupDateNode, currentButton.nextSibling);
  currentButton.remove();
  var acknowledgementMessage = document.getElementById("acknowledgement-message").value;
  currentButton.parentNode.insertAdjacentHTML("beforeend", '<p><strong>Acknowledgement:</strong> ' + acknowledgementMessage + '</p>');
  document.getElementById("popup").style.display = "none"; // Hide the popup
}

function deleteDonation(button) {
  var confirmDelete = confirm("Are you sure you want to delete this donation?");
  if (confirmDelete) {
    var donationDetails = button.parentNode;
    // Remove the donation details section from the container
    donationDetails.parentNode.removeChild(donationDetails);
    // Clear the stored form data
    localStorage.removeItem('formData');
  }
}

function openAcknowledgementPopup() {
  document.getElementById("acknowledgement-popup").style.display = "block";
}

function sendAcknowledgement() {
  var acknowledgementMessage = document.getElementById("acknowledgement-message").value;
  currentButton.parentNode.insertAdjacentHTML("beforeend", '<p><strong>Acknowledgement:</strong> ' + acknowledgementMessage + '</p>');
  console.log("Message successfully sent to donor."); // Console message
  document.getElementById("acknowledgement-popup").style.display = "none"; // Hide the popup
}

  </script>
</body>
</html>
