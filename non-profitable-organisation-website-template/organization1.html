<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Charity</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <style>
        /* Style for donation details display */
        .donation-details {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 5px;
        }

        .donation-details p {
            margin-bottom: 10px;
            font-size: 16px;
        }

        .donation-details p span {
            font-weight: bold;
        }

        .btn-update {
            margin-right: 10px;
        }
    </style>
</head>

<body>

    <!-- ======================header started====================== -->

    <header>
        <div class="my-nav">
            <div class="container">
                <div class="row">
                    <div class="nav-items">
                        <div class="menu-toggle"></div>
                        <div class="logo">
                            <img src="assets/images/logo.png">
                        </div>
                        <div class="menu-items">
                            <div class="menu">
                                <ul>
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="organization.html">organization</a></li>
                                    <li><a href="donor.html">donor</a></li>
                                    <li><a href="admin.html">admin</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="bg-02-a">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="_head_01">
                        <h2>Organization</h2>
                        <p>Home<i class="fas fa-angle-right"></i><span>Organization</span></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ====================== donor1 Section started====================== -->
    <div class="container">
        <div class="row justify-content-center mt-4">
            <div class="col-md-6">
                <a href="organization2.html" class="btn btn-secondary btn-block">Create Donation Request</a>
            </div>
            <div class="col-md-6 mt-4 mt-md-0"> <!-- Added a new column for the button -->
                <a href="orgfullfilled.html" class="btn btn-primary btn-block">Fulfilled Donations</a>
            </div>
        </div>
    </div>

    <!-- Donation Details Display -->
    <div id="donation-container" class="container">
        <!-- Donation details will be dynamically added here -->
    </div>

    <script>
        var storedFormData = localStorage.getItem('formData');

        if (storedFormData) {
            var formData = JSON.parse(storedFormData);
            displayDonation(formData);
        }

        function displayDonation(formData) {
            var donationDetails = document.createElement('div');
            donationDetails.classList.add('donation-details');

            switch (formData.itemCategory) {
                case 'Clothes':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Type of Clothing:</span> ${formData.clothesType}</p>
                        <p><span>Age:</span> ${formData.clothesAge}</p>
                        <p><span>Gender:</span> ${formData.clothesGender}</p>
                        <p><span>Season:</span> ${formData.clothesSeason}</p>
                        <p><span>Material:</span> ${formData.clothesMaterial}</p>
                        <p><span>Quantity:</span> ${formData.clothesQuantity}</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Clothes')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                case 'School Supplies':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Type:</span> ${formData.schoolSuppliesType}</p>
                        <p><span>Additional Fields:</span> ${formData.additionalFields}</p>
                        <p><span>Quantity:</span> ${formData.schoolSuppliesQuantity}</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('School Supplies')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                case 'Toys':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Age:</span> ${formData.toysAge}</p>
                        <p><span>Gender:</span> ${formData.toysGender}</p>
                        <p><span>Category:</span> ${formData.toysCategory}</p>
                        <p><span>Quantity:</span> ${formData.toysQuantity}</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Toys')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                case 'Food':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Type:</span> ${formData.foodType}</p>
                        <p><span>Item Name:</span> ${formData.foodName}</p>
                        <p><span>Quantity:</span> ${formData.foodQuantity} kg</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Food')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                case 'Medical Supplies':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Device Type:</span> ${formData.medicalDeviceType}</p>
                        <p><span>Use:</span> ${formData.medicalUse}</p>
                        <p><span>Quantity:</span> ${formData.medicalQuantity}</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Medical Supplies')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                case 'Blood Donations':
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> ${formData.itemCategory}</p>
                        <p><span>Hospital Name:</span> ${formData.hospitalName}</p>
                        <p><span>Governorate:</span> ${formData.hospitalGovernorate}</p>
                        <p><span>Area:</span> ${formData.hospitalArea}</p>
                        <p><span>Donor Name:</span> ${formData.donorName}</p>
                        <p><span>Blood Type:</span> ${formData.bloodType}</p>
                        <p><span>Quantity:</span> ${formData.bloodQuantity}</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Blood Donations')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
                    break;
                default:
                    donationDetails.innerHTML = `
                        <p><span>Item Category:</span> Unknown</p>
                        <button class="btn btn-primary btn-update" onclick="updateDonation('Unknown')">Update</button>
                        <button class="btn btn-danger" onclick="deleteDonation(this)">Delete</button>
                    `;
            }

            document.getElementById('donation-container').appendChild(donationDetails);
        }

        // Function to update donation based on category
        function updateDonation(category) {
            var donationDetails = event.target.parentNode;
            var updatedData = {};
            switch (category) {
                case 'Clothes':
                    updatedData = {
                        clothesType: prompt("Enter new type of clothing:", formData.clothesType),
                        clothesAge: prompt("Enter new age:", formData.clothesAge),
                        clothesGender: prompt("Enter new gender:", formData.clothesGender),
                        clothesSeason: prompt("Enter new season:", formData.clothesSeason),
                        clothesMaterial: prompt("Enter new material:", formData.clothesMaterial),
                        clothesQuantity: prompt("Enter new quantity:", formData.clothesQuantity)
                    };
                    break;
                case 'School Supplies':
                    updatedData = {
                        schoolSuppliesType: prompt("Enter new type of school supplies:", formData.schoolSuppliesType),
                        additionalFields: prompt("Enter new additional fields:", formData.additionalFields),
                        schoolSuppliesQuantity: prompt("Enter new quantity:", formData.schoolSuppliesQuantity)
                    };
                    break;
                case 'Toys':
                    updatedData = {
                        toysAge: prompt("Enter new age:", formData.toysAge),
                        toysGender: prompt("Enter new gender:", formData.toysGender),
                        toysCategory: prompt("Enter new category:", formData.toysCategory),
                        toysQuantity: prompt("Enter new quantity:", formData.toysQuantity)
                    };
                    break;
                case 'Food':
                    updatedData = {
                        foodType: prompt("Enter new type of food:", formData.foodType),
                        foodName: prompt("Enter new food name:", formData.foodName),
                        foodQuantity: prompt("Enter new quantity:", formData.foodQuantity)
                    };
                    break;
                case 'Medical Supplies':
                    updatedData = {
                        medicalDeviceType: prompt("Enter new device type:", formData.medicalDeviceType),
                        medicalUse: prompt("Enter new use:", formData.medicalUse),
                        medicalQuantity: prompt("Enter new quantity:", formData.medicalQuantity)
                    };
                    break;
                case 'Blood Donations':
                    updatedData = {
                        hospitalName: prompt("Enter new hospital name:", formData.hospitalName),
                        hospitalGovernorate: prompt("Enter new governorate:", formData.hospitalGovernorate),
                        hospitalArea: prompt("Enter new area:", formData.hospitalArea),
                        donorName: prompt("Enter new donor name:", formData.donorName),
                        bloodType: prompt("Enter new blood type:", formData.bloodType),
                        bloodQuantity: prompt("Enter new quantity:", formData.bloodQuantity)
                    };
                    break;
                case 'Unknown':
                    alert("Cannot update unknown category.");
                    return;
                default:
                    alert("Invalid category.");
                    return;
            }

            // Update the donation details with new data
            for (var key in updatedData) {
                formData[key] = updatedData[key];
                donationDetails.querySelector(`p span[data-key="${key}"]`).innerText = updatedData[key];
            }

            // Update the stored form data
            localStorage.setItem('formData', JSON.stringify(formData));
        }

        // Function to delete donation
        function deleteDonation(button) {
            var confirmDelete = confirm("Are you sure you want to delete this donation?");
            if (confirmDelete) {
                var donationDetails = button.parentNode;
                // Remove the donation details section from the container
                donationDetails.parentNode.removeChild(donationDetails);
                // Clear the stored form data
                localStorage.removeItem('formData');
            }
        }
    </script>

    <script src="assets/js/jquery-3.2.1.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/script.js"></script>

</body>

</html>
